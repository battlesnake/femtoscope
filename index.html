<!doctype html>
<html>
	<!-- Thanks, ChatGPT -->
	<head>
		<meta charset="utf-8">
		<title>Sine Wave Generator</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular-csp.min.css" integrity="sha512-nptw3cPhphu13Dy21CXMS1ceuSy2yxpKswAfZ7bAAE2Lvh8rHXhQFOjU+sSnw4B+mEoQmKFLKOj8lmXKVk3gow==" crossorigin="anonymous" referrerpolicy="no-referrer" />
		<link rel="stylesheet" href="style.css" />
	</head>
	<body class="accordion" ng-app ng-cloak ng-init="source_channels = [ { device: 'A device', index: 0, serial: 100, marked: false, mapped: false } ]; units = [ { type: 'analyser', name: 'Analyser', serial: 200, mapping: { description: 'potato' }, parameters: [ { name: 'Slider', view: 'slider', serial: 300, min: -10, max: 10, step: 2, value: 4 }, { name: 'Switch', view: 'switch', serial: 400, value: false } ] } ];">

		<form class="accordion-item">

			<h2 class="accordion-header">
				<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#accordion_sources">
					Sources
				</button>
			</h2>

			<div class="accordion-collapse collapse show" id="accordion_sources">
				<table class="accordion-body">
					<caption>Sources</caption>
					<thead>
						<tr>
							<td>Device</td>
							<td>Channel</td>
							<td>Map</td>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="channel in source_channels">
							<td><label ng-bind="channel.device" ng-attr-for="{{channel.serial}}"></label></td>
							<td><label ng-bind="channel.index" ng-attr-for="{{channel.serial}}"></label></td>
							<td>
								<div class="form-check form-switch">
									<input class="form-check-input" ng-attr-id="{{channel.serial}}" type="checkbox" role="switch" ng-model="channel.marked" ng-disabled="channel.mapped" />
								</div>
							</td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<td><span>Create</span></td>
							<td colspan="2">
								<button class="btn btn-primary" ng-click="create_analyser">Analyser</button>
							</td>
						</tr>
					</tfoot>
				</table>
			</div>

		</form>

		<form class="accordion-item" ng-repeat="unit in units">

			<h2 class="accordion-header">
				<button class="accordion-button" type="button" data-bs-toggle="collapse" ng-attr-data-bs-target="{{'#accordion_' + unit.serial}}" ng-bind="unit.name">
				</button>
			</h2>

			<div class="accordion-collapse collapse show" ng-attr-id="{{'accordion_' + unit.serial}}">
				<table ng-class="unit.type">
					<caption><span ng-bind="unit.name">&nbsp;<span ng-bind="unit.mapping.description"></caption>
					<tbody>
						<tr ng-repeat="parameter in unit.parameters">
							<td class="control-label">
								<label class="form-label" ng-bind="parameter.name" ng-attr-for="{{parameter.serial}}"></label>
							</td>
							<td class="control-interface" ng-switch-on="parameter.view">
								<div class="form-check form-switch" ng-switch-when="switch">
									<input class="form-check-input" ng-attr-id="{{parameter.serial}}" type="checkbox" role="switch" ng-model="parameter.value" ng-disabled="parameter.readonly" />
								</div>
								<input class="form-range" ng-attr-id="{{parameter.serial}}" ng-switch-when="slider" type="range" ng-attr-min="{{parameter.min}}" ng-attr-max="{{parameter.max}}" ng-attr-step="{{parameter.step}}" ng-model="parameter.value" ng-disabled="parameter.readonly" />
								<input class="form-control" ng-attr-id="{{parameter.serial}}" ng-switch-when="spinner" type="number" ng-attr-min="{{parameter.min}}" ng-attr-max="{{parameter.max}}" ng-attr-step="{{parameter.step}}" ng-model="parameter.value" ng-disabled="parameter.readonly" />
								<select class="form-select" ng-attr-id="{{parameter.serial}}" ng-switch-when="choice" ng-options="choice.value as choice.label for choice in parameter.choices" ng-model="parameter.value" ng-disabled="parameter.readonly"></select>
								<canvas ng-attr-id="{{parameter.serial}}" ng-switch-when="visual"></canvas>
								<div class="alert alert-danger" ng-switch-default>Unsupported view type: {{parameter.view}}</div>
							</td>
							<td class="control-unit" ng-switch-on="parameter.view">
								<span ng-switch-on="slider" ng-bind="parameter.value + ' ' + parameter.unit"></span>
								<span ng-switch-default ng-bind="parameter.unit"></span>
							</td>
							<td class="control-spacer"></td>
						</tr>
					</tbody>
					<tfoot></tfoot>
				</table>
			</div>

		</form>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js" integrity="sha512-KZmyTq3PLx9EZl0RHShHQuXtrvdJ+m35tuOiwlcZfs/rE7NZv29ygNA8SFCkMXTnYZQK2OX0Gm2qKGfvWEtRXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

		<!-- <script src="script.js"> -->
		<!-- </script> -->

	</body>
</html>
